<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼è¼•äº•æ¾¤æ»‘é›ªè¡Œç¨‹è¦åŠƒ</title>
    <!-- Chosen Palette: Warm Neutral Bliss -->
    <!-- Application Structure Plan: The SPA is designed with a top-down information architecture, starting with a sticky navigation bar for high-level access to key travel planning domains: Itinerary, Transport, Budget, and Activities. This thematic structure was chosen over a purely chronological one to allow users to quickly find information based on their immediate needs (e.g., "How do we get there?" or "What's the budget?"). The main view, "è¡Œç¨‹ç¸½è¦½", uses an interactive timeline to present the day-by-day plan, which is more engaging than a long text list. Clicks on each day reveal details, keeping the interface clean. Other sections use cards and interactive charts to break down complex information like budget and transport options, making them easier to compare and digest. This structure caters to both the planner who needs to see the big picture and the traveler who needs specific details on the fly, directly addressing the user's need to manage a multi-faceted trip with diverse participants (skiers and non-skiers). -->
    <!-- Visualization & Content Choices: 
        - Itinerary Timeline (HTML/CSS/JS): Report Info -> 9-day schedule. Goal -> Organize & Inform. Viz -> Interactive vertical timeline. Interaction -> Click to expand/collapse day details. Justification -> More engaging and less overwhelming than a long scroll of text. Method -> Custom HTML/CSS with Tailwind, JS for interactivity.
        - Budget Breakdown (Chart.js Donut Chart): Report Info -> Estimated costs for flight, lodging, ski pass, etc. Goal -> Inform & Compare. Viz -> Donut Chart. Interaction -> Hover to see details of each cost category. Justification -> Provides an immediate, easy-to-understand visual summary of where the money goes, which is more impactful than a simple table. Library -> Chart.js on Canvas.
        - Transport Comparison (HTML/CSS/JS Tabs): Report Info -> Pros and cons of Shinkansen, Bus, Rental Car. Goal -> Compare. Viz -> Tabbed content cards. Interaction -> Click tabs to switch between transport methods. Justification -> Allows for direct, side-by-side comparison of key factors (cost, time, luggage convenience) without cluttering the screen. Method -> Custom HTML/CSS with Tailwind, JS for tab switching.
        - Activity Cards (HTML/CSS/Grid): Report Info -> Details on ski slopes, outlet stores, sightseeing spots. Goal -> Organize & Inform. Viz -> Grid of content cards with icons. Interaction -> None (static info display). Justification -> A visually organized way to separate activities for skiers and non-skiers, making it easy for each group to find relevant information. Method -> HTML/CSS with Tailwind.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F8F5F2; /* Warm Neutral BG */
            color: #4A4A4A;
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #1E3A8A; /* Dark Blue Accent */
            border-bottom-color: #1E3A8A;
        }
        .mobile-nav-link {
            transition: all 0.2s ease-in-out;
        }
        .mobile-nav-link.active {
            color: #1E3A8A;
            border-bottom-color: #1E3A8A;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .timeline-item .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .timeline-item.open .details {
            max-height: 1000px; /* Adjust as needed */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: auto;
            max-height: 450px;
        }
        /* Hide scrollbar for mobile nav */
        .mobile-nav-scroll::-webkit-scrollbar {
            display: none;
        }
        .mobile-nav-scroll {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-lg sm:text-xl font-bold text-gray-800">â›·ï¸ è¼•äº•æ¾¤æ»‘é›ªä¹‹æ—…</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">è¡Œç¨‹ç¸½è¦½</a>
                        <a href="#transport" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">äº¤é€šæ”»ç•¥</a>
                        <a href="#budget" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">é ç®—åˆ†æ</a>
                        <a href="#activities" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">æ´»å‹•æ¨è–¦</a>
                        <a href="#prep" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700">è¡Œå‰æº–å‚™</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- New Mobile Nav Bar -->
        <nav class="md:hidden bg-white border-b border-gray-200">
            <div id="mobile-nav-container" class="px-2 overflow-x-auto whitespace-nowrap mobile-nav-scroll">
                <a href="#overview" class="mobile-nav-link inline-block py-3 px-4 text-sm font-medium text-gray-600 border-b-2 border-transparent">è¡Œç¨‹ç¸½è¦½</a>
                <a href="#transport" class="mobile-nav-link inline-block py-3 px-4 text-sm font-medium text-gray-600 border-b-2 border-transparent">äº¤é€šæ”»ç•¥</a>
                <a href="#budget" class="mobile-nav-link inline-block py-3 px-4 text-sm font-medium text-gray-600 border-b-2 border-transparent">é ç®—åˆ†æ</a>
                <a href="#activities" class="mobile-nav-link inline-block py-3 px-4 text-sm font-medium text-gray-600 border-b-2 border-transparent">æ´»å‹•æ¨è–¦</a>
                <a href="#prep" class="mobile-nav-link inline-block py-3 px-4 text-sm font-medium text-gray-600 border-b-2 border-transparent">è¡Œå‰æº–å‚™</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="overview" class="section">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">è¡Œç¨‹ç¸½è¦½</h2>
                <p class="text-base md:text-lg text-gray-600 max-w-3xl mx-auto">é€™æ˜¯ä¸€è¶Ÿç‚ºæœŸä¹å¤©å…«å¤œçš„å¤¢å¹»é›ªåœ‹å‡æœŸã€‚é»æ“Šä¸‹æ–¹æ¯æ—¥è¡Œç¨‹ï¼Œå³å¯å±•é–‹æˆ–æ”¶åˆè©³ç´°æ´»å‹•å…§å®¹ï¼Œè®“æ‚¨è¼•é¬†æŒæ¡æ¯ä¸€å¤©çš„ç²¾å½©å†’éšªã€‚</p>
            </div>
            <div id="timeline-container" class="relative max-w-3xl mx-auto">
                <!-- Timeline items will be injected here by JavaScript -->
            </div>
        </section>

        <section id="transport" class="section">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">äº¤é€šæ”»ç•¥</h2>
                <p class="text-base md:text-lg text-gray-600 max-w-3xl mx-auto">å¾æ±äº¬å‰å¾€è¼•äº•æ¾¤ï¼Œäº¤é€šé¸æ“‡å¤šå…ƒã€‚ç‰¹åˆ¥æ˜¯ç•¶æ‚¨è³¼è²·äº†æ–°çš„é›ªæ¿å¾Œï¼Œè¡Œæå•é¡Œæ›´éœ€è€ƒé‡ã€‚æ­¤è™•ç‚ºæ‚¨æ¯”è¼ƒå¹¾ç¨®ä¸»è¦äº¤é€šæ–¹å¼çš„å„ªåŠ£ï¼ŒåŠ©æ‚¨åšå‡ºæœ€ä½³æ±ºç­–ã€‚</p>
            </div>
            <div class="max-w-4xl mx-auto">
                <div class="flex justify-center mb-6 border-b border-gray-200 text-sm">
                    <button data-tab="shinkansen" class="transport-tab py-3 px-4 block hover:text-blue-600 focus:outline-none text-blue-600 border-b-2 font-medium border-blue-600">ğŸš„ åŒ—é™¸æ–°å¹¹ç·š</button>
                    <button data-tab="bus" class="transport-tab py-3 px-4 block hover:text-blue-600 focus:outline-none text-gray-500">ğŸšŒ é«˜é€Ÿå·´å£«</button>
                    <button data-tab="car" class="transport-tab py-3 px-4 block hover:text-blue-600 focus:outline-none text-gray-500">ğŸš— åŒ…è»Š/ç§Ÿè»Š</button>
                </div>
                <div id="transport-content" class="p-4 bg-white rounded-lg shadow">
                </div>
            </div>
        </section>

        <section id="budget" class="section">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">é ç®—åˆ†æ</h2>
                <p class="text-base md:text-lg text-gray-600 max-w-3xl mx-auto">æœ¬æ¬¡è¡Œç¨‹é©é€¢å¹´æœ«å¹´å§‹æ—ºå­£ï¼Œè²»ç”¨ç›¸å°è¼ƒé«˜ã€‚ä¸‹æ–¹çš„äº’å‹•åœ–è¡¨èˆ‡é ç®—ç´°é …èƒ½å¹«åŠ©æ‚¨äº†è§£å„é …æ”¯å‡ºçš„ä½”æ¯”ï¼Œææ—©è¦åŠƒï¼Œè°æ˜æ¶ˆè²»ã€‚</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 items-center max-w-6xl mx-auto">
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
                <div id="budget-details" class="bg-white p-6 rounded-lg shadow">
                    <h3 class="font-bold text-xl mb-4 border-b pb-2">é ä¼°è²»ç”¨ç´°é … (æ¯äºº)</h3>
                </div>
            </div>
        </section>

        <section id="activities" class="section">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">æ´»å‹•æ¨è–¦</h2>
                <p class="text-base md:text-lg text-gray-600 max-w-3xl mx-auto">è¼•äº•æ¾¤çš„é­…åŠ›ä¸åƒ…æ­¢æ–¼æ»‘é›ªã€‚é€™è£¡ç‚ºæ»‘é›ªæ„›å¥½è€…èˆ‡å¸Œæœ›äº«å—æ‚ é–’æ™‚å…‰çš„æ—…ä¼´ï¼Œåˆ†åˆ¥æ•´ç†äº†æ¨è–¦çš„æ´»å‹•ï¼Œç¢ºä¿æ¯å€‹äººéƒ½èƒ½æ‰¾åˆ°å±¬æ–¼è‡ªå·±çš„æ¨‚è¶£ã€‚</p>
            </div>

            <div class="mb-12">
                <h3 class="text-xl md:text-2xl font-bold text-center text-gray-800 mb-6">â›·ï¸ For Skiers: é›ªå ´é›ªé“ä»‹ç´¹</h3>
                <div id="ski-slopes" class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto">
                </div>
            </div>

            <div>
                <h3 class="text-xl md:text-2xl font-bold text-center text-gray-800 mb-6">ğŸ›ï¸ For Non-Skiers: è³¼ç‰©èˆ‡è§€å…‰</h3>
                <div id="non-ski-activities" class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                </div>
            </div>
        </section>

        <section id="prep" class="section">
            <div class="text-center mb-12">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">è¡Œå‰æº–å‚™èˆ‡æº«é¦¨æç¤º</h2>
                <p class="text-base md:text-lg text-gray-600 max-w-3xl mx-auto">è¬å…¨çš„æº–å‚™æ˜¯æ—…ç¨‹é †åˆ©çš„åŸºçŸ³ã€‚é€™è£¡ç‚ºæ‚¨æ•´ç†äº†å¹¾é …é—œéµçš„è¡Œå‰æº–å‚™äº‹é …èˆ‡å¯¦ç”¨æç¤ºï¼Œè®“æ‚¨çš„æ—…é€”æ›´å®‰å¿ƒã€æ›´æ„‰å¿«ã€‚</p>
            </div>
            <div id="prep-list" class="max-w-3xl mx-auto space-y-6">
            </div>
        </section>

    </main>
    
<script>
const AppData = {
    timeline: [
        { day: 'ç¬¬ä¸€æ—¥', date: '12/27 (äº”)', icon: 'âœˆï¸', title: 'æŠµé”æ±äº¬ï¼Œé›ªå…·æ¡è³¼ä»»å‹™ï¼', details: 'æ­æ©ŸæŠµé”æ±äº¬æˆç”°æˆ–ç¾½ç”°æ©Ÿå ´ã€‚å•Ÿç”¨JRæ±äº¬å»£åŸŸå‘¨éŠåˆ¸ï¼Œæ­ä¹˜N\'EXæˆ–æ±äº¬å–®è»Œé›»è»Šè‡³å¸‚å€ã€‚å‰å¾€ç¥ç”°/å¾¡èŒ¶ä¹‹æ°´é›ªå…·è¡—ï¼Œæ¨è–¦åº—å®¶å¦‚Victoriaã€FUSOç­‰ï¼Œé¸è³¼å€‹äººé›ªå…·ã€‚æ™šä¸Šå…¥ä½é„°è¿‘æ±äº¬æˆ–ä¸Šé‡è»Šç«™çš„é£¯åº—ï¼Œæ–¹ä¾¿éš”æ—¥å‡ºç™¼ã€‚' },
        { day: 'ç¬¬äºŒæ—¥', date: '12/28 (å…­)', icon: 'ğŸš†', title: 'å‰é€²è¼•äº•æ¾¤ï¼é–‹å•Ÿé›ªåœ‹æ¨¡å¼', details: 'ä½¿ç”¨JR Passæ­ä¹˜åŒ—é™¸æ–°å¹¹ç·šå‰å¾€è¼•äº•æ¾¤ (ç´„1-1.5å°æ™‚)ã€‚å…¥ä½é£¯åº—ï¼Œæ¨è–¦é è¿‘é›ªå ´çš„ç‹å­å¤§é£¯åº—æ±é¤¨/è¥¿é¤¨ã€‚å‚æ™šå¯å…ˆè‡³è¼•äº•æ¾¤ç‹å­è³¼ç‰©å»£å ´(Outlet)ç†Ÿæ‚‰ç’°å¢ƒåŠç”¨é¤ã€‚' },
        { day: 'ç¬¬ä¸‰æ—¥', date: '12/29 (æ—¥)', icon: 'â›·ï¸', title: 'æ»‘é›ªåˆé«”é©— & Outletæ™‚å…‰', details: 'ã€æ»‘é›ªçµ„ã€‘å…¨æ—¥æ–¼è¼•äº•æ¾¤ç‹å­å¤§é£¯åº—æ»‘é›ªå ´æš¢æ»‘ï¼å¾åˆç´šé›ªé“é–‹å§‹ï¼Œç†Ÿæ‚‰æ–°è£å‚™èˆ‡é›ªæ³ã€‚<br>ã€éæ»‘é›ªçµ„ã€‘åœ¨Outletäº«å—è³¼ç‰©æ¨‚è¶£ï¼Œæ­£å¥½è¶•ä¸Šå†¬å­£å¤§æ¸›åƒ¹ï¼Œä¸¦å¯åœ¨ç¾é£Ÿè¡—æˆ–ç‰¹è‰²é¤å»³ç”¨é¤ã€‚' },
        { day: 'ç¬¬å››æ—¥', date: '12/30 (ä¸€)', icon: 'â›·ï¸', title: 'æŠ€å·§ç²¾é€²æ—¥', details: 'ã€æ»‘é›ªçµ„ã€‘æŒ‘æˆ°æ›´å¤šä¸åŒçš„åˆã€ä¸­ç´šé›ªé“ï¼Œå¦‚ãƒ‘ãƒãƒ©ãƒã‚³ãƒ¼ã‚¹ï¼Œæ¬£è³æ·ºé–“å±±ç¾æ™¯ã€‚å¯è€ƒæ…®é ç´„æ•™ç·´èª²ç¨‹ç²¾é€²æŠ€å·§ã€‚<br>ã€éæ»‘é›ªçµ„ã€‘å¯å‰å¾€èˆŠè¼•äº•æ¾¤éŠ€åº§é€šï¼Œå“åšæœé†¬ã€éºµåŒ…èˆ‡å’–å•¡ï¼Œæ„Ÿå—æ‡·èˆŠè¡—é“é¢¨æƒ…ã€‚' },
        { day: 'ç¬¬äº”æ—¥', date: '12/31 (äºŒ)', icon: 'ğŸ†', title: 'é›ªåœ°è·¨å¹´å¤œ', details: 'ã€å…¨å“¡ã€‘ç™½å¤©æŒçºŒäº«å—æ»‘é›ªæˆ–è³¼ç‰©è¡Œç¨‹ã€‚æ™šä¸Šç•™æ„é£¯åº—æˆ–é›ªå ´å‘¨é‚Šæ˜¯å¦æœ‰è·¨å¹´å€’æ•¸æ´»å‹•ï¼Œé«”é©—åœ¨é›ªåœ‹è¿æ¥æ–°å¹´çš„ç¨ç‰¹æ°›åœã€‚' },
        { day: 'ç¬¬å…­æ—¥', date: '1/1 (ä¸‰)', icon: 'ğŸ‰', title: 'æ–°å¹´ç¬¬ä¸€æ»‘ï¼', details: 'ã€å…¨å“¡ã€‘å…ƒæ—¦é«”é©—ã€Œåˆæ»‘ã‚Šã€(æ–°å¹´ç¬¬ä¸€æ»‘)çš„æ¨‚è¶£ï¼éæ»‘é›ªçµ„å¯è¶1/1-1/3æ¶è³¼Outletæ¨å‡ºçš„æ–°å¹´ç¦è¢‹ï¼Œè©¦è©¦æ‰‹æ°£ã€‚' },
        { day: 'ç¬¬ä¸ƒæ—¥', date: '1/2 (å››)', icon: 'ğŸ™ï¸', title: 'å‘Šåˆ¥é›ªå±±ï¼Œè¿”å›æ±äº¬è¿æ–°å¹´', details: 'ä¸Šåˆåœ¨è¼•äº•æ¾¤åšæœ€å¾Œå·¡ç¦®ã€‚ä¸‹åˆæ­ä¹˜æ–°å¹¹ç·šè¿”å›æ±äº¬ï¼ˆæ­¤æ®µè»Šç¥¨éœ€å¦å¤–è³¼è²·ï¼‰ã€‚æŠµé”å¾Œå¯é«”é©—æ±äº¬æ–°å¹´æ°›åœï¼Œå¦‚å‰å¾€æ˜æ²»ç¥å®®ã€Œåˆè©£ã€åƒæ‹œï¼Œæˆ–åˆ°ç™¾è²¨å…¬å¸åƒèˆ‡ã€Œåˆè³£ã€æ¶ç¦è¢‹ã€‚' },
        { day: 'ç¬¬å…«æ—¥', date: '1/3 (äº”)', icon: 'ğŸ›ï¸', title: 'æ±äº¬è‡ªç”±æ—¥/ä¼´æ‰‹ç¦®æ¡è³¼', details: 'å…¨æ—¥æ±äº¬è‡ªç”±æ´»å‹•ã€‚å¯å®‰æ’æ™¯é»è§€å…‰(æ·ºè‰ã€æ¾€è°·ç­‰)ï¼Œæˆ–æ˜¯åœ¨å„å¤§ç™¾è²¨ã€è—¥å¦åº—é€²è¡Œæœ€å¾Œçš„ä¼´æ‰‹ç¦®æ¡è³¼ã€‚' },
        { day: 'ç¬¬ä¹æ—¥', date: '1/4 (å…­)', icon: 'ğŸ›«', title: 'æ»¿è¼‰å›æ†¶ï¼Œè¸ä¸Šæ­¸é€”', details: 'æ•´ç†è¡Œå›Šï¼Œå¾å¸‚å€æ­ä¹˜äº¤é€šå·¥å…·å‰å¾€æ©Ÿå ´ï¼Œè¾¦ç†ç™»æ©Ÿæ‰‹çºŒï¼Œæ­æ©Ÿè¿”å›å°åŒ—ï¼ŒçµæŸæ„‰å¿«çš„æ—…ç¨‹ã€‚' }
    ],
    transport: {
        shinkansen: {
            title: 'ğŸš„ åŒ—é™¸æ–°å¹¹ç·š (Hokuriku Shinkansen)',
            points: [
                '<strong>é€Ÿåº¦èˆ‡èˆ’é©ï¼š</strong>æœ€å¿«é¸æ“‡ï¼Œå¾æ±äº¬åˆ°è¼•äº•æ¾¤ç´„1å°æ™‚è‡³1.5å°æ™‚ã€‚',
                '<strong>è²»ç”¨ï¼š</strong>å–®ç¨‹ç´„ Â¥5,500 - Â¥5,900ã€‚å¯ä½¿ç”¨JRæ±äº¬å»£åŸŸå‘¨éŠåˆ¸ (å‰ä¸‰å¤©)ã€‚',
                '<strong>å¤§å‹è¡Œæï¼š</strong>åŒ—é™¸æ–°å¹¹ç·šç›®å‰æœªå¼·åˆ¶é ç´„ç‰¹å¤§è¡Œæä½ï¼Œä½†å»ºè­°å°‡é›ªæ¿è¢‹æ”¾ç½®æ–¼è»Šå»‚å‰å¾Œçš„è¡Œæç©ºé–“ã€‚æ—ºå­£äººå¤šï¼Œç©ºé–“å¯èƒ½æœ‰é™ã€‚',
                '<strong>å„ªé»ï¼š</strong>å¿«é€Ÿã€æº–æ™‚ã€èˆ’é©ã€‚',
                '<strong>ç¼ºé»ï¼š</strong>è²»ç”¨è¼ƒé«˜ï¼Œå°–å³°æ™‚æ®µå¤§å‹è¡Œæç½®æ”¾å¯èƒ½æ˜¯å€‹æŒ‘æˆ°ã€‚'
            ]
        },
        bus: {
            title: 'ğŸšŒ é«˜é€Ÿå·´å£«',
            points: [
                '<strong>ç¶“æ¿Ÿå¯¦æƒ ï¼š</strong>åƒ¹æ ¼æœ€å…·å„ªå‹¢ï¼Œå–®ç¨‹ç´„ Â¥2,400 - Â¥2,900ã€‚',
                '<strong>è»Šç¨‹ï¼š</strong>ç´„3å°æ™‚ï¼Œå¯èƒ½å—è·¯æ³å½±éŸ¿ã€‚',
                '<strong>å¤§å‹è¡Œæï¼š</strong>å°å¤§å‹è¡Œæé€šå¸¸è¼ƒå‹å–„ï¼Œéƒ¨åˆ†å·´å£«å…¬å¸ (å¦‚Orion Bus) è¨»æ˜å¯å…è²»è¨—é‹é›ªæ¿ï¼Œä½†å‹™å¿…æ–¼é è¨‚å‰å†æ¬¡ç¢ºèªå„å…¬å¸è¦å®šã€‚',
                '<strong>å„ªé»ï¼š</strong>åƒ¹æ ¼ä¾¿å®œï¼Œå¯èƒ½ç›´é”é›ªå ´æˆ–é£¯åº—ï¼Œçœå»è½‰ä¹˜ã€‚',
                '<strong>ç¼ºé»ï¼š</strong>æ™‚é–“é•·ï¼Œèˆ’é©åº¦ä¸å¦‚æ–°å¹¹ç·šï¼Œæ™‚é–“æ˜“å—è·¯æ³å½±éŸ¿ã€‚'
            ]
        },
        car: {
            title: 'ğŸš— åŒ…è»Š/ç§Ÿè»Šè‡ªé§•',
            points: [
                '<strong>æœ€é«˜å½ˆæ€§ï¼š</strong>è¡Œç¨‹å®Œå…¨è‡ªç”±ï¼Œé»å°é»ç§»å‹•ã€‚',
                '<strong>è²»ç”¨ï¼š</strong>æˆæœ¬æœ€é«˜ã€‚åŒ…å«ç§Ÿè»Šè²»ã€é›ªèƒè²»ç”¨ã€é«˜é€Ÿå…¬è·¯éè·¯è²»(å–®ç¨‹ç´„Â¥4,000-Â¥7,000)ã€æ²¹è³‡ã€åœè»Šè²»ç­‰ã€‚',
                '<strong>å†¬å­£é§•é§›ï¼š</strong>è¼•äº•æ¾¤å†¬å­£è·¯é¢å¯èƒ½çµå†°æˆ–ç©é›ªï¼Œé§•é§›éœ€å…·å‚™é›ªåœ°é§•é§›ç¶“é©—ä¸¦ä½¿ç”¨é›ªèƒã€‚',
                '<strong>å„ªé»ï¼š</strong>å½ˆæ€§æœ€å¤§ï¼Œè¡Œææ¬é‹æœ€æ–¹ä¾¿ã€‚',
                '<strong>ç¼ºé»ï¼š</strong>ç¸½è²»ç”¨é«˜æ˜‚ï¼Œéœ€æ‰¿æ“”é›ªåœ°é§•é§›é¢¨éšªï¼Œä¸”æ–°å¹´æœŸé–“å¯èƒ½å¡è»Šã€‚'
            ]
        }
    },
    budget: {
        chartData: [11000, 3300, 1280, 12320, 15400, 7750, 13200],
        labels: ['æ©Ÿç¥¨', 'JR Pass', 'å›ç¨‹äº¤é€š', 'æ±äº¬ä½å®¿', 'è¼•äº•æ¾¤ä½å®¿', 'æ»‘é›ªç¥¨', 'é¤é£²é›œæ”¯'],
        details: [
            { item: 'åœ‹éš›ç·šä¾†å›æ©Ÿç¥¨', cost: 'NT$ 7,000 - 15,000', note: 'æ—ºå­£åƒ¹æ ¼ï¼Œæµ®å‹•å¤§' },
            { item: 'JRæ±äº¬å»£åŸŸå‘¨éŠåˆ¸', cost: 'NT$ 3,300 (Â¥15,000)', note: 'æ¶µè“‹å‰3æ—¥ä¸»è¦äº¤é€š' },
            { item: 'è¼•äº•æ¾¤â†’æ±äº¬ äº¤é€šè²»', cost: 'NT$ 530 - 1,280', note: 'ä¾å·´å£«æˆ–æ–°å¹¹ç·š' },
            { item: 'æ±äº¬ä½å®¿ (4æ™š)', cost: 'ç´„ NT$ 12,320', note: 'æ—ºå­£é›™äººæˆ¿å‡åƒ¹é ä¼°' },
            { item: 'è¼•äº•æ¾¤ä½å®¿ (4æ™š)', cost: 'ç´„ NT$ 15,400', note: 'æ—ºå­£é›ªå ´é£¯åº—é ä¼°' },
            { item: 'æ»‘é›ªå ´é›ªç¥¨ (4å¤©)', cost: 'ç´„ NT$ 7,750 (Â¥35,200)', note: 'ç·šä¸Šå„ªæƒ åƒ¹' },
            { item: 'é¤é£²åŠé›œæ”¯ (8å¤©)', cost: 'ç´„ NT$ 13,200', note: 'ä¾å€‹äººæ¶ˆè²»ç¿’æ…£' },
            { item: '<strong>é›ªå…·æ¡è³¼ (å¦è¨ˆ)</strong>', cost: '<strong>NT$ 11,000 - 33,000+</strong>', note: '<strong>æ­¤é …ä¾å€‹äººé¸æ“‡å·®ç•°å¤§ï¼Œä¸è¨ˆå…¥åœ–è¡¨</strong>' },
            { item: '<strong>é ä¼°ç¸½èŠ±è²» (æ¯äºº)</strong>', cost: '<strong>ç´„ NT$ 64,250 èµ·</strong>', note: '<strong>ä¸å«é›ªå…·æ¡è³¼åŠå€‹äººè³¼ç‰©</strong>' }
        ]
    },
    skiSlopes: [
        { level: 'åˆç´š', color: 'bg-green-100', textColor: 'text-green-800', name: 'ãƒ—ãƒªãƒ³ã‚¹ã‚²ãƒ¬ãƒ³ãƒ‡', details: 'å¡åº¦å¹³ç·©ï¼Œè¦–é‡é–‹é—Šï¼Œä½æ–¼æ±é¤¨å‰æ–¹ï¼Œé©åˆåˆå­¸è€…èˆ‡å®¶åº­ã€‚' },
        { level: 'åˆç´š', color: 'bg-green-100', textColor: 'text-green-800', name: 'ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚³ãƒ¼ã‚¹', details: 'é•·åº¦è¶…é1å…¬é‡Œï¼Œé›ªé“å¯¬ï¼Œå¡åº¦ç©©å®šï¼Œéå¸¸å—æ­¡è¿ã€‚' },
        { level: 'ä¸­ç´š', color: 'bg-blue-100', textColor: 'text-blue-800', name: 'ãƒ‘ãƒãƒ©ãƒã‚³ãƒ¼ã‚¹', details: 'æ“æœ‰çµ•ä½³çš„çœºæœ›è¦–é‡ï¼Œå¯æœè‘—æ·ºé–“å±±æ–¹å‘æ»‘è¡Œï¼Œäº«å—ç¾æ™¯ã€‚' },
        { level: 'ä¸­ç´š', color: 'bg-blue-100', textColor: 'text-blue-800', name: 'ãƒ‘ãƒ©ãƒ¬ãƒ«ã‚³ãƒ¼ã‚¹', details: 'å¯æ­£é¢æ¬£è³æ·ºé–“å±±ï¼Œå¡åº¦é©ä¸­ï¼Œé©åˆé€²éšç·´ç¿’ã€‚' },
        { level: 'ä¸Šç´š', color: 'bg-red-100', textColor: 'text-red-800', name: 'ã‚¹ãƒ©ãƒ­ãƒ¼ãƒ ãƒãƒ¼ãƒ³', details: 'æ•´ç‰‡é™¡å¡ï¼Œæœ€å¤§å¡åº¦é”26åº¦ï¼Œè€ƒé©—æ»‘é›ªæŠ€å·§ã€‚' },
        { level: 'ä¸Šç´š', color: 'bg-red-100', textColor: 'text-red-800', name: 'ã‚¢ãƒªã‚¨ã‚¹ã‚«ã‚³ãƒ¼ã‚¹', details: 'é›ªå ´å…§æœ€å…·æŒ‘æˆ°æ€§çš„é›ªé“ï¼Œæœ€å¤§å¡åº¦è¶…é30åº¦ï¼Œé«˜æ‰‹é™å®šã€‚' }
    ],
    nonSkiActivities: [
        {
            title: 'ğŸ›ï¸ è¼•äº•æ¾¤ç‹å­è³¼ç‰©å»£å ´ (Outlet)',
            details: 'åŒ¯é›†è¶…é200å®¶åº—é‹ªï¼Œå¾åœ‹éš›ç²¾å“åˆ°æ—¥ç³»å“ç‰Œã€é‹å‹•ç”¨å“ã€ä¼´æ‰‹ç¦®æ‡‰æœ‰ç›¡æœ‰ã€‚æ—…ç¨‹æœŸé–“æ­£é€¢<strong>å†¬å­£å¤§æ¸›åƒ¹</strong>(12/27-1/6)èˆ‡<strong>æ–°å¹´ç¦è¢‹</strong>(1/1-1/3)ï¼Œæ˜¯è³¼ç‰©çš„å¤§å¥½æ™‚æ©Ÿã€‚åœ’å€å…§é‚„æœ‰ç¾é£Ÿè¡—ã€é¤å»³ã€æ¹–æ³ŠåŠè‰åªï¼Œç’°å¢ƒå„ªç¾ï¼Œéå¸¸é©åˆæ‚ é–’åº¦éä¸€å¤©ã€‚'
        },
        {
            title: 'ğŸ° èˆŠè¼•äº•æ¾¤éŠ€åº§é€š',
            details: 'å……æ»¿æ‡·èˆŠé¢¨æƒ…çš„å•†åº—è¡—ï¼Œæœ‰è¨±å¤šç‰¹è‰²å°åº—å€¼å¾—æ¢ç´¢ã€‚å¿…è¨ªåº—å®¶åŒ…æ‹¬ï¼š<strong>æ·ºé‡å±‹éºµåŒ…åº—</strong>çš„æ°´æœéºµåŒ…ã€<strong>Mikado Coffee</strong>çš„æ‘©å¡éœœæ·‡æ·‹ã€<strong>æ¾¤å±‹æœé†¬</strong>çš„å¤©ç„¶æœé†¬ï¼Œä»¥åŠè¶…äººæ°£çš„<strong>å·ä¸Šåºµ</strong>è•éº¥éºµã€‚è¡—é“å‘¨é‚Šé‚„æœ‰è–ä¿ç¾…å¤©ä¸»æ•™å ‚ç­‰æ™¯é»å¯æ¼«æ­¥éŠè¦½ã€‚'
        }
    ],
    prep: [
        { icon: 'ğŸ›‚', title: 'è­·ç…§èˆ‡ç°½è­‰', details: 'ç¢ºèªè­·ç…§æ•ˆæœŸå…­å€‹æœˆä»¥ä¸Šã€‚å°ç£è­·ç…§èµ´æ—¥è§€å…‰å…ç°½ã€‚' },
        { icon: 'âœˆï¸', title: 'æ©Ÿç¥¨èˆ‡ä½å®¿', details: 'æ–°å¹´ç‚ºè¶…ç´šæ—ºå­£ï¼Œå‹™å¿…æå‰3-6å€‹æœˆé è¨‚ï¼Œä»¥ç¢ºä¿æ©Ÿä½èˆ‡ä½å®¿ä¸¦ç²å¾—è¼ƒä½³åƒ¹æ ¼ã€‚' },
        { icon: 'ğŸŸï¸', title: 'äº¤é€šç¥¨åˆ¸', details: 'JR PassåŠæ–°å¹¹ç·šæŒ‡å®šå¸­å»ºè­°ææ—©ä¸Šç¶²é è¨‚åŠåŠƒä½ï¼Œç‰¹åˆ¥æ˜¯è·¨å€ç§»å‹•çš„è»Šç¥¨ã€‚' },
        { icon: 'ğŸ§¥', title: 'æœè£èˆ‡å¤©æ°£', details: 'æ¡ç”¨æ´‹è”¥å¼ç©¿æ­ã€‚è¼•äº•æ¾¤æ°£æº«è¼ƒæ±äº¬æ›´ä½ï¼Œå¯èƒ½è‡³é›¶ä¸‹ã€‚å‹™å¿…æº–å‚™è¶³å¤ çš„ä¿æš–è¡£ç‰©ã€é˜²é¢¨é˜²æ°´å¤–å¥—ã€å¸½å­ã€æ‰‹å¥—ã€åœå·¾ã€‚' },
        { icon: 'ğŸ’´', title: 'æ—¥å¹£èˆ‡æ”¯ä»˜', details: 'å»ºè­°é å…ˆå…Œæ›è¶³å¤ æ—¥å¹£ç¾éˆ”ï¼Œä»¥æ‡‰å°éƒ¨åˆ†å°åº—å®¶æˆ–é¤å»³éœ€æ±‚ã€‚ä¿¡ç”¨å¡åœ¨å¤§åŸå¸‚åŠè§€å…‰å€æ™®åŠã€‚' },
        { icon: 'â°', title: 'ç‡Ÿæ¥­æ™‚é–“æ³¨æ„', details: 'å¹´æœ«å¹´å§‹(12/31-1/3)æœŸé–“ï¼Œè¨±å¤šåº—å®¶ã€é¤å»³ã€éŠ€è¡Œã€æ™¯é»çš„ç‡Ÿæ¥­æ™‚é–“æœƒèª¿æ•´æˆ–å…¬ä¼‘ï¼Œå‡ºç™¼å‰å‹™å¿…æŸ¥è©¢å®˜ç¶²ç¢ºèªã€‚' }
    ]
};


document.addEventListener('DOMContentLoaded', function() {
    const sections = document.querySelectorAll('.section');
    const navLinks = document.querySelectorAll('.nav-link');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

    function updateContent(hash) {
        const targetHash = hash.substring(1);
        
        sections.forEach(section => {
            section.classList.toggle('active', section.id === targetHash);
        });

        navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === hash);
        });
        
        mobileNavLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === hash);
        });

        window.scrollTo(0, 0);
    }

    function setupNavigation() {
        const allLinks = [...navLinks, ...mobileNavLinks];
        
        allLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetHash = this.getAttribute('href');
                history.pushState(null, null, targetHash);
                updateContent(targetHash);
            });
        });

        window.addEventListener('popstate', function() {
            updateContent(window.location.hash || '#overview');
        });

        updateContent(window.location.hash || '#overview');
    }

    function renderTimeline() {
        const container = document.getElementById('timeline-container');
        container.innerHTML = ''; 

        // Add the desktop-only center line
        const desktopLine = document.createElement('div');
        desktopLine.className = 'hidden md:block absolute left-1/2 top-0 h-full w-0.5 bg-gray-300 -translate-x-1/2';
        container.appendChild(desktopLine);

        AppData.timeline.forEach((item, index) => {
            const isEven = index % 2 === 0;

            const timelineItem = document.createElement('div');
            timelineItem.className = 'timeline-item';

            timelineItem.innerHTML = `
                <!-- Mobile Layout: Flexbox -->
                <div class="flex items-start gap-x-4 mb-8 md:hidden">
                    <!-- Left Side: Icon and connecting line -->
                    <div class="relative flex-none after:absolute after:top-9 after:left-1/2 after:w-0.5 after:h-full after:bg-gray-300 after:-translate-x-1/2">
                        <div class="relative z-10 flex items-center justify-center w-8 h-8 mt-1 bg-blue-500 rounded-full text-lg text-white">
                            ${item.icon}
                        </div>
                    </div>
                    <!-- Right Side: Content Card -->
                    <div class="flex-grow bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-xl transition-shadow duration-300">
                        <p class="text-sm text-gray-500">${item.date}</p>
                        <h4 class="font-bold text-lg mb-1">${item.day}: ${item.title}</h4>
                        <div class="details text-gray-600 text-sm">
                            <p>${item.details}</p>
                        </div>
                    </div>
                </div>

                <!-- Desktop Layout: Alternating sides -->
                <div class="hidden md:flex relative mb-8 ${isEven ? '' : 'flex-row-reverse'} justify-between w-full">
                    <div class="w-5/12"></div>
                    <div class="absolute left-1/2 top-1 transform -translate-x-1/2 z-10 flex items-center justify-center w-8 h-8 bg-blue-500 rounded-full text-lg text-white">
                        ${item.icon}
                    </div>
                    <div class="w-5/12 bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-xl transition-shadow duration-300">
                        <p class="text-sm text-gray-500">${item.date}</p>
                        <h4 class="font-bold text-lg mb-1">${item.day}: ${item.title}</h4>
                        <div class="details text-gray-600 text-sm">
                            <p>${item.details}</p>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(timelineItem);
        });
        
        // Add click listener to all cards (mobile and desktop)
        document.querySelectorAll('.timeline-item .bg-white').forEach(card => {
            card.addEventListener('click', () => {
                // Find the closest parent 'timeline-item' and toggle the class on it
                card.closest('.timeline-item').classList.toggle('open');
            });
        });
    }
    
    function renderTransport() {
        const contentDiv = document.getElementById('transport-content');
        const tabs = document.querySelectorAll('.transport-tab');
        
        function updateTransportContent(transportType) {
            const data = AppData.transport[transportType];
            contentDiv.innerHTML = `
                <h3 class="font-bold text-xl mb-3">${data.title}</h3>
                <ul class="space-y-2 list-disc list-inside text-gray-700">
                    ${data.points.map(point => `<li>${point}</li>`).join('')}
                </ul>
            `;
            tabs.forEach(tab => {
                if (tab.dataset.tab === transportType) {
                    tab.classList.add('text-blue-600', 'border-blue-600');
                    tab.classList.remove('text-gray-500');
                } else {
                    tab.classList.remove('text-blue-600', 'border-blue-600');
                    tab.classList.add('text-gray-500');
                }
            });
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                updateTransportContent(tab.dataset.tab);
            });
        });
        
        updateTransportContent('shinkansen');
    }
    
    function renderBudget() {
        const ctx = document.getElementById('budgetChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: AppData.budget.labels,
                datasets: [{
                    label: 'é ç®—åˆ†é…',
                    data: AppData.budget.chartData,
                    backgroundColor: ['#2563EB', '#3B82F6', '#60A5FA', '#93C5FD', '#BFDBFE', '#DBEAFE', '#EFF6FF'],
                    borderColor: '#F8F5F2',
                    borderWidth: 4,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: { family: "'Noto Sans TC', sans-serif" }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD', minimumFractionDigits: 0 }).format(context.parsed);
                                }
                                return label;
                            }
                        },
                        titleFont: { family: "'Noto Sans TC', sans-serif" },
                        bodyFont: { family: "'Noto Sans TC', sans-serif" }
                    }
                },
                cutout: '60%'
            }
        });

        const detailsContainer = document.getElementById('budget-details');
        const list = document.createElement('ul');
        list.className = 'space-y-3';
        AppData.budget.details.forEach(item => {
            const li = document.createElement('li');
            li.className = 'flex justify-between items-center text-sm';
            li.innerHTML = `
                <div>
                    <span class="font-medium text-gray-800">${item.item}</span>
                    <p class="text-xs text-gray-500">${item.note}</p>
                </div>
                <span class="font-semibold text-gray-900">${item.cost}</span>
            `;
            list.appendChild(li);
        });
        detailsContainer.appendChild(list);
    }
    
    function renderActivities() {
        const skiContainer = document.getElementById('ski-slopes');
        AppData.skiSlopes.forEach(slope => {
            const card = document.createElement('div');
            card.className = `p-4 rounded-lg shadow ${slope.color}`;
            card.innerHTML = `
                <div class="flex items-baseline">
                    <span class="px-2 py-1 text-xs font-semibold rounded-full ${slope.color} ${slope.textColor}">${slope.level}</span>
                    <h4 class="ml-2 font-bold ${slope.textColor}">${slope.name}</h4>
                </div>
                <p class="mt-2 text-sm ${slope.textColor} opacity-90">${slope.details}</p>
            `;
            skiContainer.appendChild(card);
        });
        
        const nonSkiContainer = document.getElementById('non-ski-activities');
        AppData.nonSkiActivities.forEach(activity => {
            const card = document.createElement('div');
            card.className = 'bg-white p-6 rounded-lg shadow';
            card.innerHTML = `
                <h4 class="font-bold text-xl text-gray-800 mb-2">${activity.title}</h4>
                <p class="text-gray-600">${activity.details}</p>
            `;
            nonSkiContainer.appendChild(card);
        });
    }

    function renderPrep() {
        const container = document.getElementById('prep-list');
        AppData.prep.forEach(item => {
            const card = document.createElement('div');
            card.className = 'bg-white p-5 rounded-lg shadow-sm flex items-start space-x-4';
            card.innerHTML = `
                <div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-100 text-xl">
                    ${item.icon}
                </div>
                <div>
                    <h4 class="font-bold text-lg text-gray-800">${item.title}</h4>
                    <p class="text-gray-600">${item.details}</p>
                </div>
            `;
            container.appendChild(card);
        });
    }


    setupNavigation();
    renderTimeline();
    renderTransport();
    renderBudget();
    renderActivities();
    renderPrep();
});
</script>
</body>
</html>
